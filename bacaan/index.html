<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hafalan Kanji - Mode Bacaan</title>
  <link rel="shortcut icon" type="image/png" href="asset/logo2-removebg.png" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/x-icon" href="/home/asset/logo2-removebg.png" />
</head>
<body>

  <!-- ─── NAVBAR — sama persis Hafalan Kotoba ─── -->
  <nav class="app-header">
    <div class="container h-100 d-flex justify-content-between align-items-center">

      <!-- Kiri: Logo + Nama -->
      <div class="d-flex align-items-center gap-3">
                  <img src="/home/asset/logo2-removebg.png" alt="Logo"
               style="height: 42px; width: auto" class="brand-logo"
               onerror="this.style.display='none'" />
        <div class="d-flex flex-column lh-1">
          <span class="brand-title fw-bold">Mode Bacaan</span>
          <small class="brand-subtitle-text">by Ardian Wahyu Saputra</small>
        </div>
      </div>

      <!-- Kanan: Tombol Kembali + List Cerita -->
      <div class="d-flex gap-2">
        <a href="/index.html" id="exit-btn" class="btn-back-header">
          <i class="bi bi-arrow-left me-1"></i> Kembali
        </a>
        <button id="header-back-btn" class="btn-back-header d-none">
          List Cerita
        </button>
      </div>

    </div>
  </nav>

  <!-- ─── MAIN CONTENT ─── -->
  <div class="main-content container py-4">

    <!-- ===== LIST VIEW ===== -->
    <div id="list-view">

      <div class="text-center mb-4">
        <h3 class="fw-bold" style="color: var(--text-primary);">Pilih Cerita untuk Membaca</h3>
        <p class="text-secondary mb-0">Baca, dengar, dan pahami kanji dalam konteks cerita</p>
      </div>

      <!-- Filter & Search -->
      <div class="filter-bar">
        <button id="btn-filter-category" class="btn-filter-category">
          <i class="bi bi-funnel-fill filter-icon"></i>
          <span>Kategori: Semua</span>
          <i class="bi bi-chevron-down small ms-1" style="color:var(--text-muted)"></i>
        </button>

        <div class="position-relative search-wrapper">
          <input type="text" id="input-cari" class="form-control"
                 placeholder="Cari judul cerita..." />
          <i class="bi bi-search search-icon"></i>
        </div>
      </div>

      <!-- Grid Cerita -->
      <div id="loading-spinner" class="text-center my-5"></div>
      <div class="row g-4 justify-content-center" id="story-grid"></div>

      <!-- Pagination -->
      <div id="pagination-container" class="d-flex justify-content-center align-items-center gap-3"></div>
    </div><!-- /#list-view -->


    <!-- ===== READER VIEW ===== -->
    <div id="reader-view" style="display: none;">
      <div class="reader-paper">

        <!-- Hero icon area -->
        <div class="reader-hero-container">
          <img id="reader-img" src="" alt="" style="display: none;" />
        </div>

        <!-- Body reader -->
        <div class="reader-body">
          <h2 id="reader-title" class="text-center reader-main-title">Judul</h2>
          <hr class="reader-divider" />

          <!-- Konten interlinear -->
          <div id="interlinear-content" class="japanese-content mb-3"></div>

          <!-- Navigasi halaman -->
          <div class="d-flex justify-content-between pt-3 mt-2" style="border-top: 1px solid var(--border);">
            <button id="btn-prev" class="btn rounded-pill ">
               Sebelumnya
            </button>
            <button id="btn-next" class="btn btn-success-gradient rounded-pill ">
              Selanjutnya 
            </button>
          </div>
        </div>

      </div><!-- /.reader-paper -->

      <div style="height: 110px;"></div>

      <!-- ─── FLOATING DOCK ─── -->
      <div id="floating-dock">

        <!-- Audio (mobile only) -->
        <button id="btn-audio" class="d-md-none" title="Putar Suara">
          <div id="icon-audio">
            <i class="bi bi-play-fill"></i>
          </div>
          <span id="label-audio">Dengar</span>
        </button>

        <!-- Toggle Terjemahan -->
        <button id="toggle-trans-btn" title="Tampilkan/Sembunyikan Arti">
          <div id="icon-trans">
            <i class="bi bi-translate"></i>
          </div>
          <span>Arti</span>
        </button>

        <!-- Toggle Furigana -->
        <button id="toggle-furigana-btn" title="Tampilkan/Sembunyikan Furigana">
          <div id="icon-furigana">
            <i class="bi bi-eye-slash-fill"></i>
          </div>
          <span>Furigana</span>
        </button>

        <!-- Scroll to Top -->
        <button id="btn-scroll-top" title="Ke Atas"
                onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
          <div id="icon-up">
            <i class="bi bi-arrow-up"></i>
          </div>
          <span style="white-space:nowrap;">Ke Atas</span>
        </button>

      </div><!-- /#floating-dock -->
    </div><!-- /#reader-view -->

  </div><!-- /.main-content -->


  <!-- ─── MODAL: PILIH KATEGORI ─── -->
  <div class="modal fade" id="categoryModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header px-4 pt-4 pb-0 border-0">
          <h5 class="modal-title fw-bold">Pilih Kategori</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body p-4">
          <div id="modal-category-list" class="d-flex flex-wrap gap-2 justify-content-center"></div>
        </div>
        <div class="modal-footer border-0 justify-content-center pb-4">
          <button type="button" class="btn btn-outline-secondary rounded-pill px-4"
                  data-bs-dismiss="modal">Tutup</button>
        </div>
      </div>
    </div>
  </div>


  <!-- ─── MODAL: PILIH VERSI ─── -->
  <div class="modal fade" id="versionChoiceModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <button type="button" class="btn-close"
                data-bs-dismiss="modal"
                style="position:absolute; top:20px; right:20px; z-index:10;"></button>

        <div class="modal-body text-center p-4 p-md-5">

          <!-- Icon bulat -->
          <div class="version-modal-icon mx-auto" style="
            width:80px; height:80px;
            background: rgba(13,148,136,0.12);
            border-radius: 50%;
            display:flex; align-items:center; justify-content:center;
            color: #0D9488; font-size: 2.2rem;
            border: 2px solid rgba(13,148,136,0.2);
            margin-bottom: 1rem;
            box-shadow: 0 0 0 8px rgba(13,148,136,0.06);
          ">
            <i class="fas fa-book-reader"></i>
          </div>

          <h4 class="fw-bold mb-2" id="modal-story-title">Pilih Pengalaman Baca</h4>
          <p class="text-secondary mb-4" style="font-size:0.92rem; line-height:1.6;">
            Sesuaikan cerita dengan level membacamu saat ini.
          </p>

          <div class="d-grid gap-3">
            <!-- Versi Singkat -->
            <button id="btn-choice-short" class="btn position-relative">
              <i class="bi bi-seedling me-2"></i> Versi Singkat
              <span id="badge-short-missing"
                    class="position-absolute top-50 end-0 translate-middle-y me-3 badge"
                    style="display:none; background:var(--bg-card-alt); color:var(--text-muted); border:1px solid var(--border); border-radius:20px; font-weight:normal;">
                Tidak Ada
              </span>
            </button>

            <!-- Versi Panjang -->
            <button id="btn-choice-long" class="btn position-relative">
              <i class="bi bi-book-open me-2"></i> Versi Panjang
              <span id="badge-long-missing"
                    class="position-absolute top-50 end-0 translate-middle-y me-3 badge"
                    style="display:none; background:var(--bg-card-alt); color:var(--text-muted); border:1px solid var(--border); border-radius:20px; font-weight:normal;">
                Tidak Ada
              </span>
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="main.js"></script>
</body>
</html>